!function(n){"use strict";Drupal.behaviors.ntb_signup={attach:function(i,t){var u=this;n("body").once("signup-popup",function(){n(".signup-trigger").on("click",function(n){n.preventDefault(),u.triggerOverlay()})})},triggerOverlay:function(){n(".ntb-signup").fadeIn(),n(".ntb-signup input").focus(),n(".ntb-signup .btn").on("click",Drupal.behaviors.ntb_signup.submit),n(".ntb-signup .close").on("click",Drupal.behaviors.ntb_signup.close),n(".ntb-signup-overlay").on("click",Drupal.behaviors.ntb_signup.close)},validateEmail:function(n){var i=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return i.test(n)},submit:function(){var i=n(".ntb-signup input").val(),t=Drupal.behaviors.ntb_signup.validateEmail(i);return t?void n.ajax({type:"POST",dataType:"json",url:"/signup/ajax/submit/",data:{email:i}}).done(function(n){Drupal.behaviors.ntb_signup.submit_response(n)}).fail(function(){n(".ntb-signup .errors").html(Drupal.t("We're sorry. We were unable to process your email"))}):void n(".ntb-signup .errors").html(Drupal.t("That is not a valid email address."))},close:function(){n(".ntb-signup").fadeOut()},submit_response:function(i){var t=i,u=n(".ntb-signup-form-wrapper");u.fadeOut(function(){n(this).html(t)}).fadeIn()}}}(jQuery);
