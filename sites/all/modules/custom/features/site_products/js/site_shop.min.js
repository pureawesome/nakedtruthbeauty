!function(t){"use strict";Drupal.behaviors.site_shop={attach:function(a,e){var o=this;t("body",a).once("ajax",function(){o.fadeInProducts(),t(".view-product-type-taxonomy a").on("click",function(a){a.preventDefault(),t(a.target).hasClass("active")||o.clickChange(a)}),o.activeMenu(),window.onpopstate=function(t){o.popChange(t,event.state),o.activeMenu()}}),t(document).ajaxSuccess(function(t,a,e){a.responseText.indexOf("view-shop")!==-1&&(Drupal.attachBehaviors(".view-shop"),o.fadeInProducts())})},activeMenu:function(){var a=window.location.pathname.split("/").filter(function(t){return t.length>0}),e=a.pop();t(".view-product-type-taxonomy a").each(function(){t(this).attr("data")===e&&(t(".view-product-type-taxonomy a").removeClass("active"),t(this).addClass("active"))})},fadeInProducts:function(){t(".view-shop .views-row").each(function(a){var e=this;t(this).css("opacity",0),setTimeout(function(){t(e).fadeTo(500,1)},200*a)})},clickChange:function(t){var a=t.target.href,e=a.split("/"),o=e.pop();Drupal.behaviors.site_shop.shopAjax(t,o,!0)},popChange:function(t,a){Drupal.behaviors.site_shop.shopAjax(t,a,!1)},shopAjax:function(a,e,o){var n=t(".view-shop").parent(),i=Drupal.settings.basePath+"ajax/shop/type/"+e;n.load(i,function(){var n=window.location.pathname,i=n.split("/"),s=i.filter(function(t){return t.length>0}),c=null;s.length>1?(c=s.pop(),s.push(e)):s.push(e);var p="/"+s.join("/");o&&(history.pushState(e,e,p),t(".view-product-type-taxonomy a").removeClass("active"),t(a.target).addClass("active"))})}}}(jQuery);
