!function(e){Drupal.toggleFieldset=function(l){var t=e(l);if(t.is(".collapsed")){var a=e("> .fieldset-wrapper",l).hide();t.removeClass("collapsed").trigger({type:"collapsed",value:!1}).find("> legend span.fieldset-legend-prefix").html(Drupal.t("Hide")),a.slideDown({duration:"fast",easing:"linear",complete:function(){Drupal.collapseScrollIntoView(l),l.animating=!1},step:function(){Drupal.collapseScrollIntoView(l)}})}else t.trigger({type:"collapsed",value:!0}),e("> .fieldset-wrapper",l).slideUp("fast",function(){t.addClass("collapsed").find("> legend span.fieldset-legend-prefix").html(Drupal.t("Show")),l.animating=!1})},Drupal.collapseScrollIntoView=function(l){var t=document.documentElement.clientHeight||document.body.clientHeight||0,a=document.documentElement.scrollTop||document.body.scrollTop||0,n=e(l).offset().top,i=55;n+l.offsetHeight+i>t+a&&(l.offsetHeight>t?window.scrollTo(0,n):window.scrollTo(0,n+l.offsetHeight-t+i))},Drupal.behaviors.collapse={attach:function(l,t){e("fieldset.collapsible",l).once("collapse",function(){var l=e(this),t=location.hash&&"#"!=location.hash?", "+location.hash:"";l.find(".error"+t).length&&l.removeClass("collapsed");var a=e('<span class="summary"></span>');l.bind("summaryUpdated",function(){var t=e.trim(l.drupalGetSummary());a.html(t?" ("+t+")":"")}).trigger("summaryUpdated");var n=e("> legend .fieldset-legend",this);e('<span class="fieldset-legend-prefix element-invisible"></span>').append(l.hasClass("collapsed")?Drupal.t("Show"):Drupal.t("Hide")).prependTo(n).after(" ");e('<a class="fieldset-title" href="#"></a>').prepend(n.contents()).appendTo(n).click(function(){var e=l.get(0);return e.animating||(e.animating=!0,Drupal.toggleFieldset(e)),!1});n.append(a)})}}}(jQuery);
