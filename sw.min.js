"use strict";function updateStaticCache(){return caches.open(staticCacheName).then(function(e){return e.addAll(["/sites/all/themes/ntb/fonts/quicksand-regular-webfont.woff2","/sites/all/themes/ntb/fonts/fontawesome-webfont.woff2?v=4.6.3","/sites/all/themes/ntb/fonts/have_heart_one-webfont.woff2","/sites/all/themes/ntb/fonts/quicksand-bold-webfont.woff2","/sites/all/modules/custom/features/site_products/js/site_shop.min.js?v=1.0","/sites/all/modules/custom/features/site_search/js/site_search.min.js?v=1","/sites/all/modules/custom/features/site_products/js/site_products.min.js?v=1.0","/sites/all/modules/contrib/dc_ajax_add_cart/js/dc_ajax_add_cart_html.js","/sites/all/modules/custom/modules/dc_ajax_enhancements/js/dc_ajax_enhancements.min.js?v=1","/sites/all/modules/contrib/flexslider/assets/js/flexslider.load.js","/sites/all/libraries/flexslider/jquery.flexslider-min.js"].concat(offlinePages)),e.addAll(["/misc/jquery.once.js?v=1.2","/misc/drupal.js","/misc/ajax.js","/misc/progress.js","/sites/all/libraries/modernizr/modernizr-2.8.3.min.js?v=2.3.8","/sites/all/libraries/bootstrap/js/lib/collapse.min.js?v=3.3.6","/sites/all/libraries/bootstrap/js/lib/dropdown.min.js?v=3.3.6","/sites/all/modules/contrib/jquery_update/replace/jquery/1.10/jquery.min.js?v=1.10.2","/sites/all/modules/contrib/google_analytics/googleanalytics.js","/sites/all/themes/ntb/js/ntb.behaviors.min.js?v=1.0","/sites/all/themes/ntb/css/ntb.css?v=1.0","/sites/all/themes/ntb/logo.png","/offline","/"])})}function stashInCache(e,t,s){caches.open(e).then(function(e){e.put(t,s)})}function trimCache(e,t){caches.open(e).then(function(s){s.keys().then(function(n){n.length>t&&s.delete(n[0]).then(trimCache(e,t))})})}function clearOldCaches(){return caches.keys().then(function(e){return Promise.all(e.filter(function(e){return 0!==e.indexOf(version)}).map(function(e){return caches.delete(e)}))})}var version="v0.9::",staticCacheName=version+"static",pagesCacheName=version+"pages",imagesCacheName=version+"images",offlinePages=["/shop/","/ingredients/","/about/","/shop/beam/","/shop/lid/","/shop/lip-cheek/","/shop/bath/","/shop/sets/"];self.addEventListener("install",function(e){e.waitUntil(updateStaticCache().then(function(){return self.skipWaiting()}))}),self.addEventListener("activate",function(e){e.waitUntil(clearOldCaches().then(function(){self.clients.claim()}))}),self.addEventListener("message",function(e){"trimCaches"===e.data.command&&(trimCache(pagesCacheName,35),trimCache(imagesCacheName,20))}),self.addEventListener("fetch",function(e){var t=e.request,s=new URL(t.url);if(t.url.indexOf("/admin")===-1&&"GET"===t.method)return t.headers.get("Accept").indexOf("text/html")!==-1?void e.respondWith(fetch(t).then(function(e){var n=e.clone();return offlinePages.includes(s.pathname)||offlinePages.includes(s.pathname+"/")?stashInCache(staticCacheName,t,n):stashInCache(pagesCacheName,t,n),e}).catch(function(){return caches.match(t).then(function(e){return e||caches.match("/offline")})})):void e.respondWith(caches.match(t).then(function(e){return e||fetch(t).then(function(e){if(t.headers.get("Accept").indexOf("image")!==-1){var s=e.clone();stashInCache(imagesCacheName,t,s)}return e}).catch(function(){if(t.headers.get("Accept").indexOf("image")!==-1)return new Response('<svg role="img" aria-labelledby="offline-title" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg"><title id="offline-title">Offline</title><g fill="none" fill-rule="evenodd"><path fill="#D8D8D8" d="M0 0h400v300H0z"/><text fill="#9B9B9B" font-family="Helvetica Neue,Arial,Helvetica,sans-serif" font-size="72" font-weight="bold"><tspan x="93" y="172">offline</tspan></text></g></svg>',{headers:{"Content-Type":"image/svg+xml","Cache-Control":"no-store"}})})}))});
