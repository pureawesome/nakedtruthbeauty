!function(t){Drupal.behaviors.verticalTabs={attach:function(i){t(".vertical-tabs-panes",i).once("vertical-tabs",function(){var i,e=t(":hidden.vertical-tabs-active-tab",this).val(),a=t("> fieldset",this);if(0!=a.length){var s=t('<ul class="vertical-tabs-list"></ul>');t(this).wrap('<div class="vertical-tabs clearfix"></div>').before(s),a.each(function(){var a=new Drupal.verticalTab({title:t("> legend",this).text(),fieldset:t(this)});s.append(a.item),t(this).removeClass("collapsible collapsed").addClass("vertical-tabs-pane").data("verticalTab",a),this.id==e&&(i=t(this))}),t("> li:first",s).addClass("first"),t("> li:last",s).addClass("last"),i||(i=window.location.hash&&t(this).find(window.location.hash).length?t(this).find(window.location.hash).closest(".vertical-tabs-pane"):t("> .vertical-tabs-pane:first",this)),i.length&&i.data("verticalTab").focus()}})}},Drupal.verticalTab=function(i){var e=this;t.extend(this,i,Drupal.theme("verticalTab",i)),this.link.click(function(){return e.focus(),!1}),this.link.keydown(function(i){if(13==i.keyCode)return e.focus(),t("fieldset.vertical-tabs-pane :input:visible:enabled:first").focus(),!1}),this.fieldset.bind("summaryUpdated",function(){e.updateSummary()}).trigger("summaryUpdated")},Drupal.verticalTab.prototype={focus:function(){this.fieldset.siblings("fieldset.vertical-tabs-pane").each(function(){var i=t(this).data("verticalTab");i.fieldset.hide(),i.item.removeClass("selected")}).end().show().siblings(":hidden.vertical-tabs-active-tab").val(this.fieldset.attr("id")),this.item.addClass("selected"),t("#active-vertical-tab").remove(),this.link.append('<span id="active-vertical-tab" class="element-invisible">'+Drupal.t("(active tab)")+"</span>")},updateSummary:function(){this.summary.html(this.fieldset.drupalGetSummary())},tabShow:function(){return this.item.show(),this.item.closest(".vertical-tabs").show(),this.item.parent().children(".vertical-tab-button").removeClass("first").filter(":visible:first").addClass("first"),this.fieldset.removeClass("vertical-tab-hidden").show(),this.focus(),this},tabHide:function(){this.item.hide(),this.item.parent().children(".vertical-tab-button").removeClass("first").filter(":visible:first").addClass("first"),this.fieldset.addClass("vertical-tab-hidden").hide();var t=this.fieldset.siblings(".vertical-tabs-pane:not(.vertical-tab-hidden):first");return t.length?t.data("verticalTab").focus():this.item.closest(".vertical-tabs").hide(),this}},Drupal.theme.prototype.verticalTab=function(i){var e={};return e.item=t('<li class="vertical-tab-button" tabindex="-1"></li>').append(e.link=t('<a href="#"></a>').append(e.title=t("<strong></strong>").text(i.title)).append(e.summary=t('<span class="summary"></span>'))),e}}(jQuery);
