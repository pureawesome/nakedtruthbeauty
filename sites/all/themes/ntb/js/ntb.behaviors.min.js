!function(t){"use strict";Drupal.behaviors.ntb={attach:function(n,e){var a=this;t("body").once("nav-script",function(){Modernizr.touchevents?t("ul.nav li.dropdown > a").on("touchstart click",function(n){n.preventDefault(),t(this).hasClass("open")?(t(this).removeClass("open"),t(this).siblings(".dropdown-menu").stop(!0,!0).delay(200).fadeOut(500)):(t(this).addClass("open"),t(this).siblings(".dropdown-menu").stop(!0,!0).delay(200).fadeIn(500))}):(t("ul.nav li.dropdown").on("mouseover",function(){t(this).addClass("open"),t(this).children(".dropdown-menu").stop(!0,!0).delay(200).fadeIn(500)}),t("ul.nav li.dropdown").on("mouseout",function(){t(this).removeClass("open"),t(this).children(".dropdown-menu").stop(!0,!0).delay(200).fadeOut(500)})),t(window).on("resize load",t.throttle(100,a.calcWidth))}),a.enableLazyImages(n)},loadImg:function(n){if("undefined"!==t(n).attr("data-src")){var e=t(n).attr("data-src"),a=new Image;a.src=e,a.onload=function(){t(n).removeClass("fa fa-spin fa-spinner fa-2x"),t(n).attr("src",e)}}},calcWidth:function(){var n=0,e=t(".primary-nav > .more").outerWidth(!0);t(".primary-nav > li:not(.more)").each(function(){n+=t(this).outerWidth(!0)});var a=t(".nav-primary-wrapper").outerWidth(!0)-e-15;if(n>a){var r=t(".primary-nav > li:not(.more)").last();r.attr("data-width",r.outerWidth(!0)),r.prependTo(t(".primary-nav > .more > ul")),Drupal.behaviors.ntb.calcWidth()}else{var i=t(".primary-nav > li.more li").first();if(i.length>0){var o=i.data("width")||i.outerWidth(!0);n+o<a&&(i.insertBefore(t(".primary-nav > .more")),Drupal.behaviors.ntb.calcWidth())}var l=t(".primary-nav > .more > a");1===t(".primary-nav > li").length?l.text("menu"):l.text("more")}t(".primary-nav > .more li").length>0?t(".primary-nav > .more").css("display","inline-block"):t(".primary-nav > .more").css("display","none"),1===t(".primary-nav > li").length?t(".primary-nav > .more > a").text="menu":t(".primary-nav > li").last().find("a").html="more"},enableLazyImages:function(n){function e(){o=document.getElementsByClassName("lazy-img")}function a(){e();for(var t=0;t<o.length;t++)if(i(o[t])&&o[t].getAttribute("data-src")){var n=o[t],l=n.getAttribute("data-src"),s=new Image;s.src=l,s.onload=function(){n.src=l,n.removeAttribute("data-src"),n.classList.remove("lazy-img"),a()}}r()}function r(){o=Array.prototype.filter.call(o,function(t){return t.getAttribute("data-src")})}function i(t){var n=t.getBoundingClientRect();return n.bottom>=0&&n.right>=0&&n.top<=(window.innerHeight||document.documentElement.clientHeight)&&n.left<=(window.innerWidth||document.documentElement.clientWidth)}n!==document&&a();var o=[];t(window).on("load",a),t(window).on("resize load scroll",t.throttle(100,a))}}}(jQuery);
