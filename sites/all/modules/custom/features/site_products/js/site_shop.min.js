!function(t){"use strict";Drupal.behaviors.site_shop={attach:function(e,a){var o=this;e===document&&(o.fadeInProducts(),t(".view-product-type-taxonomy a").on("click",function(e){e.preventDefault(),t(e.target).hasClass("active")||o.clickChange(e)}),o.activeMenu(),window.onpopstate=function(t){o.popChange(t,event.state),o.activeMenu()},t(document).ajaxSuccess(function(t,e,a){e.responseText.indexOf("view-shop")!==-1&&(Drupal.attachBehaviors(e.responseText),o.fadeInProducts())}))},activeMenu:function(){var e=window.location.pathname.split("/").filter(function(t){return t.length>0}),a=e.pop();t(".view-product-type-taxonomy a").each(function(){t(this).attr("data")===a&&(t(".view-product-type-taxonomy a").removeClass("active"),t(this).addClass("active"))})},fadeInProducts:function(){t(".view-shop .views-row").each(function(e){var a=this;t(this).css("opacity",0),setTimeout(function(){t(a).fadeTo(500,1)},200*e)})},clickChange:function(t){var e=t.target.href,a=e.split("/"),o=a.pop();Drupal.behaviors.site_shop.shopAjax(t,o,!0)},popChange:function(t,e){Drupal.behaviors.site_shop.shopAjax(t,e,!1)},shopAjax:function(e,a,o){var n=t(".view-shop").parent(),i=Drupal.settings.basePath+"ajax/shop/type/"+a;n.load(i,function(){var n=window.location.pathname,i=n.split("/"),s=i.filter(function(t){return t.length>0}),c=null;s.length>1?(c=s.pop(),s.push(a)):s.push(a);var p="/"+s.join("/");o&&(history.pushState(a,a,p),t(".view-product-type-taxonomy a").removeClass("active"),t(e.target).addClass("active"))})}}}(jQuery);
